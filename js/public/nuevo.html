<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel de Administración</title>
</head>
<body>
  <div class="container">
    <h1>Panel de Administración</h1>
  
    <h2>Listado de Empresas</h2>
    <table id="empresasTable">
      <tr>
        <th>Nombre de la Empresa</th>
        <th>Acciones</th>
      </tr>
    </table>
  
    <div class="add-link">
      <a href="administrarEmpresa.html">Agregar Empresa</a>
    </div>
  </div>

  <script>
    // Función para cargar las empresas desde el servidor
    function cargarEmpresas() {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          var empresas = JSON.parse(this.responseText);
          var table = document.getElementById("empresasTable");

          // Limpiar la tabla antes de agregar las nuevas filas
          table.innerHTML = "<tr><th>Nombre de la Empresa</th><th>Acciones</th></tr>";

          // Agregar filas para cada empresa
          empresas.forEach(function(empresa) {
            var row = table.insertRow();
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            cell1.innerHTML = empresa.Denominación;
            cell2.innerHTML = '<button onclick="location.href=\'administrarNoticia.html?idEmpresa=' + empresa.Id + '\'">Agregar Noticia</button>' +
                              '<button onclick="location.href=\'modificarEmpresa.html?idEmpresa=' + empresa.Id + '\'">Modificar</button>' +
                              '<button onclick="eliminarEmpresa(' + empresa.Id + ')">Eliminar</button>';
          });
        }
      };
      xhttp.open("GET", "crear_obtener_empresas.php", true); // Cambia la URL según la ruta de tu servidor
      xhttp.send();
    }

    // Función para eliminar una empresa
    function eliminarEmpresa(idEmpresa) {
      // Aquí deberías hacer una petición AJAX para eliminar la empresa con el id dado
      alert("Eliminar empresa con ID: " + idEmpresa);
    }

    // Llamar a cargarEmpresas al cargar la página para mostrar las empresas
    cargarEmpresas();
  </script>
</body>
</html>
